{"version":3,"file":"dashboard.element-BzMSXEtf.js","sources":["../../../Client/src/dashboards/dashboard.element.ts"],"sourcesContent":["import {\r\n  LitElement,\r\n  css,\r\n  html,\r\n  customElement,\r\n  state,\r\n} from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbElementMixin } from \"@umbraco-cms/backoffice/element-api\";\r\n\r\ninterface Payment {\r\n  paymentHash: string;\r\n  contentId: number;\r\n  userSessionId: string;\r\n  status: string;\r\n}\r\n\r\n@customElement(\"lightning-payments-dashboard\")\r\nexport class LightningPaymentsDashboardElement extends UmbElementMixin(LitElement) {\r\n  @state()\r\n  private payments: Payment[] = [];\r\n\r\n  @state()\r\n  private filteredPayments: Payment[] = [];\r\n\r\n  @state()\r\n  private searchTerm: string = \"\";\r\n\r\n  constructor() {\r\n    super();\r\n    this.loadPayments();\r\n  }\r\n\r\n  async loadPayments() {\r\n    try {\r\n      const response = await fetch(\r\n        \"/umbraco/api/LightningPaymentsApi/GetAllPayments\"\r\n      );\r\n      if (response.ok) {\r\n        this.payments = await response.json();\r\n        this.filteredPayments = this.payments;\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to load payments:\", error);\r\n    }\r\n  }\r\n\r\n  private handleSearch(e: Event) {\r\n    const target = e.target as HTMLInputElement;\r\n    this.searchTerm = target.value.toLowerCase();\r\n    this.filteredPayments = this.payments.filter((p) =>\r\n      p.paymentHash.toLowerCase().includes(this.searchTerm) ||\r\n      p.contentId.toString().includes(this.searchTerm) ||\r\n      p.status.toLowerCase().includes(this.searchTerm)\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return html`\r\n      <umb-body-layout header-transparent>\r\n        <div slot=\"header\">\r\n          <h2>Lightning Payments Dashboard</h2>\r\n        </div>\r\n        <div slot=\"main\">\r\n          <uui-box>\r\n            <div slot=\"header\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search payments...\"\r\n                @input=${this.handleSearch}\r\n                style=\"width: 100%; padding: 8px; margin-bottom: 16px;\"\r\n              />\r\n            </div>\r\n            <uui-table>\r\n              <uui-table-head>\r\n                <uui-table-head-cell>Payment Hash</uui-table-head-cell>\r\n                <uui-table-head-cell>Content ID</uui-table-head-cell>\r\n                <uui-table-head-cell>Session ID</uui-table-head-cell>\r\n                <uui-table-head-cell>Status</uui-table-head-cell>\r\n              </uui-table-head>\r\n              <uui-table-body>\r\n                ${this.filteredPayments.map(\r\n                  (payment) => html`\r\n                    <uui-table-row>\r\n                      <uui-table-cell>${payment.paymentHash}</uui-table-cell>\r\n                      <uui-table-cell>${payment.contentId}</uui-table-cell>\r\n                      <uui-table-cell>${payment.userSessionId}</uui-table-cell>\r\n                      <uui-table-cell>${payment.status}</uui-table-cell>\r\n                    </uui-table-row>\r\n                  `\r\n                )}\r\n              </uui-table-body>\r\n            </uui-table>\r\n          </uui-box>\r\n        </div>\r\n      </umb-body-layout>\r\n    `;\r\n  }\r\n\r\n  static styles = [\r\n    css`\r\n      :host {\r\n        display: block;\r\n        padding: var(--uui-size-layout-1);\r\n      }\r\n\r\n      uui-box {\r\n        margin-bottom: var(--uui-size-layout-1);\r\n      }\r\n\r\n      h2 {\r\n        margin-top: 0;\r\n      }\r\n    `,\r\n  ];\r\n}\r\n\r\nexport default LightningPaymentsDashboardElement;\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"lightning-payments-dashboard\": LightningPaymentsDashboardElement;\r\n  }\r\n}\r\n"],"names":["LightningPaymentsDashboardElement","UmbElementMixin","LitElement","response","error","target","p","html","payment","css","__decorateClass","state","customElement","LightningPaymentsDashboardElement$1"],"mappings":";;;;;;;AAiBO,IAAMA,IAAN,cAAgDC,EAAgBC,CAAU,EAAE;AAAA,EAUjF,cAAc;AACZ,UAAA,GATF,KAAQ,WAAsB,CAAA,GAG9B,KAAQ,mBAA8B,CAAA,GAGtC,KAAQ,aAAqB,IAI3B,KAAK,aAAA;AAAA,EACP;AAAA,EAEA,MAAM,eAAe;AACnB,QAAI;AACF,YAAMC,IAAW,MAAM;AAAA,QACrB;AAAA,MAAA;AAEF,MAAIA,EAAS,OACX,KAAK,WAAW,MAAMA,EAAS,KAAA,GAC/B,KAAK,mBAAmB,KAAK;AAAA,IAEjC,SAASC,GAAO;AACd,cAAQ,MAAM,4BAA4BA,CAAK;AAAA,IACjD;AAAA,EACF;AAAA,EAEQ,aAAa,GAAU;AAC7B,UAAMC,IAAS,EAAE;AACjB,SAAK,aAAaA,EAAO,MAAM,YAAA,GAC/B,KAAK,mBAAmB,KAAK,SAAS;AAAA,MAAO,CAACC,MAC5CA,EAAE,YAAY,YAAA,EAAc,SAAS,KAAK,UAAU,KACpDA,EAAE,UAAU,WAAW,SAAS,KAAK,UAAU,KAC/CA,EAAE,OAAO,YAAA,EAAc,SAAS,KAAK,UAAU;AAAA,IAAA;AAAA,EAEnD;AAAA,EAEA,SAAS;AACP,WAAOC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAWc,KAAK,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAYxB,KAAK,iBAAiB;AAAA,MACtB,CAACC,MAAYD;AAAA;AAAA,wCAESC,EAAQ,WAAW;AAAA,wCACnBA,EAAQ,SAAS;AAAA,wCACjBA,EAAQ,aAAa;AAAA,wCACrBA,EAAQ,MAAM;AAAA;AAAA;AAAA,IAAA,CAGrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOf;AAkBF;AAjGaR,EAiFJ,SAAS;AAAA,EACdS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcF;AA9FQC,EAAA;AAAA,EADPC,EAAA;AAAM,GADIX,EAEH,WAAA,YAAA,CAAA;AAGAU,EAAA;AAAA,EADPC,EAAA;AAAM,GAJIX,EAKH,WAAA,oBAAA,CAAA;AAGAU,EAAA;AAAA,EADPC,EAAA;AAAM,GAPIX,EAQH,WAAA,cAAA,CAAA;AARGA,IAANU,EAAA;AAAA,EADNE,EAAc,8BAA8B;AAAA,GAChCZ,CAAA;AAmGb,MAAAa,IAAeb;"}
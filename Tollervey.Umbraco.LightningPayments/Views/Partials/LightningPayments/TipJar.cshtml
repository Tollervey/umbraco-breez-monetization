@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<dynamic>
@inject Tollervey.Umbraco.LightningPayments.UI.Services.IRuntimeSettingsService Runtime
@{
  var flags = await Runtime.GetAsync();
  if (!flags.Enabled || !flags.TipJarEnabled)
  {
      if (flags.HideUiWhenDisabled) { return; }
  }
}
<script>
  // idempotent client loader
  (function(){
    if (!window.__lpClientLoaded) {
      const s = document.createElement('script');
      s.type = 'module';
      s.src = '/App_Plugins/Tollervey.Umbraco.LightningPayments/lightning-ui.js';
      document.head.appendChild(s);
      window.__lpClientLoaded = true;
    }
  })();
</script>
<breez-tip-jar title="Buy me a coffee" description="Thanks for your support!" defaultamount="1000"></breez-tip-jar>
